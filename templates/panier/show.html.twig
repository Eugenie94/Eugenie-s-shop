{% extends 'base.html.twig' %}

{% block title %}Panier
{% endblock %}

{% block body %}
	<h1>Panier</h1>

	<div class="row">
		<div class="col-md-4 order-md-2 mb-4">
			{% if panier_content is not empty and buy != true %}
				<h4 class="d-flex justify-content-between align-items-center mb-3">
					<span class="text-muted">Your panier</span>
					<span class="badge badge-secondary badge-pill">{{ panier_content|length }}</span>
				</h4>
				<ul class="list-group mb-3">
					{% set total = 0 %}
					{% for p in panier_content %}
						{% set totalProduct = 0 %}
						{% set totalProduct = p.product.price * p.quantity %}
						{% set total = total + (p.product.price * p.quantity) %}
						<li class="list-group-item d-flex justify-content-between lh-condensed">
							<div>
								<h6 class="my-0">{{ p.product.name }}</h6>
								<small class="text-muted">{{ p.product.price }}
									€ x
									{{ p.quantity }}</small>
							</div>
							<span class="text-muted">
								{{ totalProduct }}
								€
							</span>
							<a href="{{ path('panier_content_delete', { 'id':p.id }) }}" style="color:red">x</a>
						</li>
					{% endfor %}
					<li class="list-group-item d-flex justify-content-between">
						<span>Total (EUR)</span>
						<strong>{{ total }}
							€</strong>
					</li>
				</ul>
			</div>
			<div class="col-md-8 order-md-1">
				<h4 class="mb-3">Billing address</h4>
				<form class="needs-validation" method="POST">
					<div class="row">
						<div class="col-md-6 mb-3">
							<label for="firstName">First name</label>
							<input type="text" class="form-control" id="firstName" placeholder="" value="{{ app.user.firstname }}">
							<div class="invalid-feedback">
								Valid first name is required.
							</div>
						</div>
						<div class="col-md-6 mb-3">
							<label for="lastName">Last name</label>
							<input type="text" class="form-control" id="lastName" placeholder="" value="{{ app.user.lastname }}">
							<div class="invalid-feedback">
								Valid last name is required.
							</div>
						</div>
					</div>

					<div class="mb-3">
						<label for="address">Address</label>
						<input type="text" class="form-control" id="address" placeholder="1234 Main St">
						<div class="invalid-feedback">
							Please enter your shipping address.
						</div>
					</div>
					<hr class="mb-4">

					<h4 class="mb-3">Payment</h4>
					<div class="row">
						<div class="col-md-6 mb-3">
							<label for="cc-name">Name on card</label>
							<input type="text" class="form-control" id="cc-name" placeholder="">
							<small class="text-muted">Full name as displayed on card</small>
							<div class="invalid-feedback">
								Name on card is
							</div>
						</div>
						<div class="col-md-6 mb-3">
							<label for="cc-number">Credit card number</label>
							<input type="text" class="form-control" id="cc-number" placeholder="">
							<div class="invalid-feedback">
								Credit card number is required
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-3 mb-3">
							<label for="cc-expiration">Expiration</label>
							<input type="text" class="form-control" id="cc-expiration" placeholder="">
							<div class="invalid-feedback">
								Expiration date required
							</div>
						</div>
						<div class="col-md-3 mb-3">
							<label for="cc-expiration">CVV</label>
							<input type="text" class="form-control" id="cc-cvv" placeholder="">
							<div class="invalid-feedback">
								Security code required
							</div>
						</div>
					</div>
					<hr class="mb-4">
					<button class="btn btn-primary btn-lg btn-block" type="submit">Buy</button>
				</form>
			{% else %}
				<p>Your shopping panier is empty</p>
                <a href="{{ path('product_index') }}" class="btn btn-primary">Go shopping</a>
			{% endif %}
		</div>
	</div>

{% endblock %}